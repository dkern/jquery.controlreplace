/*! jQuery Control Replace 0.3.2 - MIT & GPL-2.0 license - Copyright 2016, Daniel 'Eisbehr' Kern */
!function(e,a,t){e.fn.controlReplace=function(t){var l={additionalClass:null,onChange:null,afterReplace:null,inputCss:{position:"absolute",top:2,left:2}};t&&e.extend(l,t);var n=this;e(n).each(function(){var t=e(this),n=t.prop("tagName").toLowerCase(),c=t.attr("type"),d=t.attr("id").replace(".",""),r=t.attr("name"),i=t.val();if("undefined"!=typeof t.attr("id")&&""!=e.trim(d))if("input"!=n||"checkbox"!=c&&"radio"!=c||t.data("replaced")){if("select"==n&&!t.prop("multiple")&&"multiple"!=t.attr("multiple")){t.hide();var s=t.find("option:selected").text(),o=e("<div/>",{"class":"select_replace "+r,data:{id:d,name:r}}).addClass(l.additionalClass).insertAfter(t),p=e("<input/>",{id:"replaced_"+d,name:"replaced_"+d,type:"text",value:s,readonly:"readonly","class":"required-entry no-blur"}).appendTo(o),v=e("<div><ul/></div>").addClass("list_container").appendTo(o);t.prop("disabled")&&p.attr("disabled","disabled").addClass("disabled");var u=e("ul",v);t.find("option").each(function(){var a=e(this);e("<li/>",{"class":(a.attr("class")?a.attr("class"):"")+(a.prop("selected")?" selected":""),html:a.text(),data:{value:a.val()}}).attr("data-value",a.val()).appendTo(u)}),p.on("selectstart focus",function(e){return p.blur(),e.preventDefault(),!1}),p.click(function(){if(!p.prop("disabled")){var t=p.parent(),l=t.hasClass("open");e("div.select_replace").removeClass("open"),l||(t.addClass("open"),e(a).on("keyup.control_replace_select",function(l){27==l.keyCode&&(t.removeClass("open"),e(a).off("control_replace_select"))}).on("click.control_replace_select",function(l){t.is(l.target)||0!==t.has(l.target).length||(t.removeClass("open"),e(a).off("control_replace_select"))}))}}),u.find("li").click(function(){var n=e(this);e("div.select_replace").removeClass("open"),e(a).off("control_replace_select");var c=e('input[id="'+d+'"]');c.val(n.attr("data-value")),p.val(n.text()),t.val(n.data("value")),n.parent().find("li").removeClass("selected"),n.addClass("selected"),l.onChange&&l.onChange(c),p.change(),c.change()}),t.replaceWith(e("<input />",{id:d,name:r,type:"hidden",value:i})),t=e("#"+d),l.afterReplace&&l.afterReplace(o,t)}}else e("<div />",{"class":c+"_replace",data:{id:d,name:r,type:c,value:i}}).attr("data-id",d).attr("data-name",r).addClass(l.additionalClass).insertAfter(t),t.prop("checked")&&t.next().addClass("active"),t.data("replaced",!0).css(l.inputCss).click(function(e){return e.preventDefault(),!1}).next().click(function(){var a=e(this),t=a.data("type");"checkbox"==t?a.hasClass("active")?(a.removeClass("active").prev().removeAttr("checked").prop("checked",!1).change(),l.onChange&&l.onChange(a.data("name"),null)):(a.addClass("active").prev().attr("checked","checked").prop("checked",!0).change(),l.onChange&&l.onChange(a.data("name"),a.data("value"))):"radio"==t&&(e("div[data-name='"+a.data("name")+"']").removeClass("active"),e("input[type='radio'][name='"+a.data("name")+"']").removeAttr("checked"),e("input[type='radio'][name='"+a.data("name")+"'][value='"+a.data("value")+"']").attr("checked","checked").prop("checked",!0).click(),a.addClass("active"),l.onChange&&l.onChange(a.data("name"),a.data("value")))}),e("label[for='"+d+"']").click(function(){e("div[data-id='"+e(this).attr("for")+"']").click()}),l.afterReplace&&l.afterReplace(t)})}}(jQuery,document);